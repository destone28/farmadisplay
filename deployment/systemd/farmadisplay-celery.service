[Unit]
Description=TurnoTec Celery Worker
After=network.target redis.service
Requires=redis.service

[Service]
Type=forking
User=www-data
Group=www-data
WorkingDirectory=/opt/turnotec/backend
Environment="PATH=/opt/turnotec/backend/venv/bin"
ExecStart=/opt/turnotec/backend/venv/bin/celery -A app.celery worker --loglevel=info --detach
ExecStop=/opt/turnotec/backend/venv/bin/celery -A app.celery control shutdown
Restart=always
RestartSec=10

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=turnotec-celery

[Install]
WantedBy=multi-user.target
